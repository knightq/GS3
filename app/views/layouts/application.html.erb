<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title><%= h(yield(:title) || "GS on Rails") %></title>
		<%= javascript_include_tag :defaults %>
		<!-- 2dconcept's jqgrid -->
		<%= javascript_include_tag 'jquery-1.4.2.min' %>
		<%= javascript_include_tag 'jquery.event.drag-1.5.min' %>
		<%= javascript_include_tag 'jquery.event.drop-1.1' %>

    <%= stylesheet_link_tag 'application' %>
    <%= stylesheet_link_tag 'gs' %>

		<%= csrf_meta_tag %>
  	<%= yield(:head) %>
  </head>
  <body>
		<div id="banner">
			<%= image_tag 'gs_on_rails.png', :class => 'title' %>
			<% if @current_user %>
				<div id="user_info">
					Sei autenticato come <b><%= @current_user.user_name %></b> | 
				  <%= link_to "Esci", user_session_path(current_user.id), :confirm => "Sicuro di voler scollegarti?", :method => :delete %>
					<%#= button_to "Esci", { :action => "delete", :id => current_user.id }, :confirm => "Sicuro di voler scollegarti?", :method => :delete %>
				</div>
			<% end %>
			<%- if show_title? -%>
			  <div id="function_title"><%=h yield(:title) %></div>
			<%- end -%>
		</div>
		<%= tag('div', {:id => 'main', :class => (has_content?(:sidebar) ? '' : 'nosidebar')}, true) %>
		  <div id="sidebar">
		    <span title="Collassa tutti i blocchi", class="collapse_all">&nbsp;&nbsp;&nbsp;</span>
		    <span title="Espandi tutti i blocchi", class="expand_all">&nbsp;&nbsp;&nbsp;</span>
				<% unless (flash[:notice].blank? and flash[:error].blank?) %>
					<div id="flash_messages">
						<%- flash.each do |name, msg| -%>		
							<%= content_tag :div, msg, :id => "flash_#{name}"%>
						<%- end -%>
					</div>
				<% end %>
	      <%= yield :sidebar %>
		  </div>

		   <div id="content">
		      <%= yield :layout %>
		   </div>
		</div>
	   <div id="footer">Powered by GS on Rails Â© 2010 <%= mail_to("asalicetti@kion.it", "Andrea Salicetti", :encode => "javascript").html_safe %></div>
  </body>
</html>
